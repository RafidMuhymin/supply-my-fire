---
import { Image } from "astro:assets";
import type { ImageMetadata } from "astro";

import Button from "./Button.astro";

interface Title {
  main: string;
  highlight: string;
  suffix: string;
}

interface Service {
  title: string;
  description: string;
  image: ImageMetadata;
  size: string;
}

interface ButtonConfig {
  href: string;
  text: string;
}

interface Props {
  title: Title;
  services: Service[];
  button?: ButtonConfig;
}

const { title, services, button } = Astro.props;
---

<section>
  <h2 class="text-center mb-8 lg:mb-12">
    {title.main}
    {title.highlight && <span class="italic">{title.highlight}</span>}
    {title.suffix}
  </h2>

  <div class="lg:grid lg:grid-cols-12 space-y-5 lg:space-y-0 gap-5">
    {
      services.map((service) => (
        <div
          class={`relative group overflow-hidden rounded-lg ${service.size}`}
        >
          <div class="relative h-75 lg:h-100 overflow-hidden">
            <Image
              src={service.image}
              alt={service.title}
              class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"
            />

            <div class="absolute inset-0 bg-linear-to-r from-black to-black/0 " />
          </div>

          <div class="absolute bottom-5 md:bottom-7.5 left-5 md:left-7.5">
            <h3 class="text-h3-variant-4 text-white mb-4">{service.title}</h3>

            <p class="text-body-variant-1 text-neutral-300 max-w-147 pr-4">
              {service.description}
            </p>

            {button && (
              <div class="mt-5 lg:mt-8">
                <Button
                  href={button.href}
                  width="fit"
                  variant="primary"
                  text={button.text}
                />
              </div>
            )}
          </div>
        </div>
      ))
    }
  </div>
</section>
